<<<<<<< HEAD
(function(i,d){typeof exports=="object"&&typeof module<"u"?d(exports,require("@tanstack/vue-query"),require("vue")):typeof define=="function"&&define.amd?define(["exports","@tanstack/vue-query","vue"],d):(i=typeof globalThis<"u"?globalThis:i||self,d(i.VueQueryRequestUtils={},i.VueQuery,i.Vue))})(this,function(i,d,u){"use strict";const w=Symbol("api");function A(){const e=u.inject(w);if(!e)throw new Error("No API instance provided. You must call provideApi() in your app setup.");return e}function j(e){return{install(n){n.provide(w,e)}}}function $(e=""){return{async get(n){const r=await fetch(`${e}${n}`);if(!r.ok)throw new Error(`HTTP error! Status: ${r.status}`);return{data:await r.json()}},async post(n,r){const t=await fetch(`${e}${n}`,{method:"POST",headers:{"Content-Type":"application/json"},body:r?JSON.stringify(r):void 0});if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return{data:await t.json()}},async put(n,r){const t=await fetch(`${e}${n}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:r?JSON.stringify(r):void 0});if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return{data:await t.json()}},async patch(n,r){const t=await fetch(`${e}${n}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:r?JSON.stringify(r):void 0});if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return{data:await t.json()}},async delete(n,r){const t=await fetch(`${e}${n}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:r?JSON.stringify(r):void 0});if(!t.ok)throw new Error(`HTTP error! Status: ${t.status}`);return{data:await t.json()}}}}const p=e=>typeof e=="string"||typeof e=="number"||typeof e=="boolean",h=e=>{throw new Error(`[useGet] Invalida paramRef: ${e}`)},f=e=>{if(u.isRef(e))return f(e.value);if(Array.isArray(e))return e.map(n=>f(n));if(typeof e=="object"&&e!==null){const n={};for(const r in e)n[r]=f(e[r]);return n}return e},g=e=>{if(e!=null&&!p(e)){if(Array.isArray(e)){e.every(p)||h("Array values must be string | number | boolean");return}if(typeof e=="object"){if("path"in e||"query"in e){if(e.path&&(!Array.isArray(e.path)||!e.path.every(p))&&h("params.path must be an array of string | number | boolean"),e.query){(typeof e.query!="object"||Array.isArray(e.query))&&h("params.query must be a plain object");for(const[r,t]of Object.entries(e.query))!p(t)&&!(Array.isArray(t)&&t.every(p))&&h(`params.query.${r} must be string | number | boolean or array of those`)}return}for(const[r,t]of Object.entries(e))!p(t)&&!(Array.isArray(t)&&t.every(p))&&h(`paramRef.${r} must be string | number | boolean or array of those`);return}h("Unsopported paramRef type")}},m=(e,n)=>{let r=[],t={};const o=f(u.unref(n));if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")r=[o.toString()];else if(Array.isArray(o))r=o.map(String);else if(o&&typeof o=="object")if("path"in o||"query"in o){const s=f(o.path);Array.isArray(s)&&(r=s.map(String));const a=f(o.query);typeof a=="object"&&a!==null&&!Array.isArray(a)&&(t=a)}else t=o;const c=r.length>0?`${r.join("/")}`:"",l=Object.keys(t).length>0?`?${new URLSearchParams(Object.entries(t).map(([s,a])=>[s,String(a)])).toString()}`:"";return`${e}${c}${l}`};function P({url:e,queryKey:n,API:r,options:t,paramRef:o}){if(!e||typeof e!="string")throw new Error("Invalid or missing URL");const c=u.isRef(o)?o:u.ref(o),l=u.computed(()=>{const y=u.unref(n),b=f(u.unref(c));return[y,JSON.stringify(b)]}),s=A(),a=r??s;if(!a)throw new Error("No API instance provided, please provide an api instance via the API prop or use the provideApi function");return d.useQuery({queryKey:l.value,queryFn:async()=>{const y=f(u.unref(c));g(y);const b=y?m(e,y):e;return(await a.get(b)).data},...t})}function S({method:e,url:n,API:r,requestConfig:t,options:o,mutationKey:c}){const l=A(),s=r??l;return d.useMutation({mutationKey:c?Array.isArray(c)?c:[c]:void 0,mutationFn:async a=>{const y=a??{};return(await(s instanceof Object&&"defaults"in s?s[e](n,y,t):s[e](n,y))).data},...o})}i.createFetchClient=$,i.provideApi=j,i.useApi=A,i.useGet=P,i.useSend=S,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
=======
(function(i,p){typeof exports=="object"&&typeof module<"u"?p(exports,require("@tanstack/vue-query"),require("vue")):typeof define=="function"&&define.amd?define(["exports","@tanstack/vue-query","vue"],p):(i=typeof globalThis<"u"?globalThis:i||self,p(i.VueQueryRequestUtils={},i.VueQuery,i.Vue))})(this,function(i,p,a){"use strict";const v=Symbol("api");function w(){const e=a.inject(v);if(e)return e}function $(e){return{install(t){t.provide(v,e)}}}const y=e=>typeof e=="string"||typeof e=="number"||typeof e=="boolean";class d extends Error{constructor(t){super(`[useGet] ${t}`),this.name="UseGetError"}}const b=e=>{const t=a.toValue(e);if(Array.isArray(t))return t.map(b);if(t&&typeof t=="object"&&!Array.isArray(t)){const o={};for(const r in t)o[r]=b(t[r]);return o}return t},g=(e,t="paramRef")=>{if(e!=null&&!y(e)){if(Array.isArray(e)){e.forEach((o,r)=>{if(!y(o))throw new d(`[${t}[${r}]] must be string | number | boolean, got ${typeof o}`)});return}if(typeof e=="object"){if("path"in e||"query"in e){if(e.path&&(!Array.isArray(e.path)||!e.path.every(y)))throw new d(`[${t}.path] must be an array of string | number | boolean`);if(e.query&&(typeof e.query!="object"||Array.isArray(e.query)))throw new d(`[${t}.query] must be a plain object`);if(e.query){for(const[o,r]of Object.entries(e.query))if(!y(r)&&!(Array.isArray(r)&&r.every(y)))throw new d(`[${t}.query.${o}] must be string | number | boolean or array of those`)}return}for(const[o,r]of Object.entries(e))if(!y(r)&&!(Array.isArray(r)&&r.every(y)))throw new d(`[${t}.${o}] must be string | number | boolean or array of those`);return}throw new d(`[${t}] Unsupported type: ${typeof e}`)}},j=(e,t)=>{let o=[],r={};const n=a.toValue(t);if(n==null)return e;y(n)?o=[String(n)]:Array.isArray(n)?o=n.map(String):typeof n=="object"&&("path"in n||"query"in n?(Array.isArray(n.path)&&(o=n.path.map(String)),n.query&&typeof n.query=="object"&&!Array.isArray(n.query)&&(r=n.query)):r=n);const c=o.length>0?`/${o.join("/")}`:"",l=Object.keys(r).length>0?`?${new URLSearchParams(Object.entries(r).flatMap(([s,f])=>Array.isArray(f)?f.map(u=>[s,String(u)]):[[s,String(f)]])).toString()}`:"";return`${e}${c}${l}`};function S({url:e,queryKey:t,API:o,options:r,paramRef:n}){if(!e||typeof e!="string")throw new Error("Invalid or missing URL");const c=a.isRef(n)||typeof n=="function"?n:a.ref(n),l=a.computed(()=>a.toValue(t).map(b)),s=w(),f=o??s;if(!f)throw new Error("No API instance provided, please provide an api instance via the API prop or use the provideApi function.");return p.useQuery({queryKey:l.value,queryFn:async()=>{const u=b(c);g(u);const q=u!=null?j(e,u):e;return(await f.get(q)).data},...r})}function k({method:e,url:t,API:o,requestConfig:r,options:n,mutationKey:c}){const l=w(),s=o??l,f=a.computed(()=>c?Array.isArray(c)?c:[c]:void 0);if(!s)throw new Error("No API instance provided, please provide an api instance via the API prop or use the provideApi function.");const u=e.toLowerCase();return p.useMutation({mutationKey:f.value,mutationFn:async q=>{let A;const h=q??{};switch(u){case"post":A=await s.post(t,h,r);break;case"put":A=await s.put(t,h,r);break;case"patch":A=await s.patch(t,h,r);break;case"delete":A=await s.delete(t,{...r,data:h});break;default:throw new Error(`HTTP method not supported: ${e}`)}return A.data},...n})}i.provideApi=$,i.useApi=w,i.useGet=S,i.useSend=k,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
>>>>>>> a02323d2dc5e275cbf4c07056c10d0b005e6882b
