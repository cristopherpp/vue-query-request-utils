(function(o,b){typeof exports=="object"&&typeof module<"u"?b(exports,require("@tanstack/vue-query"),require("vue")):typeof define=="function"&&define.amd?define(["exports","@tanstack/vue-query","vue"],b):(o=typeof globalThis<"u"?globalThis:o||self,b(o.VueQueryRequestUtils={},o.VueQuery,o.Vue))})(this,function(o,b,y){"use strict";const m=Symbol("api");function h(){const e=y.inject(m);if(!e)throw new Error("No API instance provided. You must call provideApi() in your app setup.");return e}function q(e){return{install(n){n.provide(m,e)}}}const d=e=>typeof e=="string"||typeof e=="number"||typeof e=="boolean",l=e=>{throw new Error(`[useGet] Invalida paramRef: ${e}`)},c=e=>{if(y.isRef(e))return c(e.value);if(Array.isArray(e))return e.map(n=>c(n));if(typeof e=="object"&&e!==null){const n={};for(const i in e)n[i]=c(e[i]);return n}return e},w=e=>{if(e!=null&&!d(e)){if(Array.isArray(e)){e.every(d)||l("Array values must be string | number | boolean");return}if(typeof e=="object"){if("path"in e||"query"in e){if(e.path&&(!Array.isArray(e.path)||!e.path.every(d))&&l("params.path must be an array of string | number | boolean"),e.query){(typeof e.query!="object"||Array.isArray(e.query))&&l("params.query must be a plain object");for(const[i,r]of Object.entries(e.query))!d(r)&&!(Array.isArray(r)&&r.every(d))&&l(`params.query.${i} must be string | number | boolean or array of those`)}return}for(const[i,r]of Object.entries(e))!d(r)&&!(Array.isArray(r)&&r.every(d))&&l(`paramRef.${i} must be string | number | boolean or array of those`);return}l("Unsopported paramRef type")}},g=(e,n)=>{let i=[],r={};const t=c(y.unref(n));if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")i=[t.toString()];else if(Array.isArray(t))i=t.map(String);else if(t&&typeof t=="object")if("path"in t||"query"in t){const a=c(t.path);Array.isArray(a)&&(i=a.map(String));const u=c(t.query);typeof u=="object"&&u!==null&&!Array.isArray(u)&&(r=u)}else r=t;const f=i.length>0?`${i.join("/")}`:"",A=Object.keys(r).length>0?`?${new URLSearchParams(Object.entries(r).map(([a,u])=>[a,String(u)])).toString()}`:"";return`${e}${f}${A}`};function j({url:e,queryKey:n,API:i,options:r,paramRef:t}){if(!e||typeof e!="string")throw new Error("Invalid or missing URL");const f=y.isRef(t)?t:y.ref(t),A=y.computed(()=>{const s=y.unref(n),p=c(y.unref(f));return[s,JSON.stringify(p)]}),a=h(),u=i??a;return b.useQuery({queryKey:A.value,queryFn:async()=>{const s=c(y.unref(f));w(s);const p=s?g(e,s):e;return(await u.get(p)).data},...r})}function P({method:e,url:n,API:i,requestConfig:r,options:t,mutationKey:f}){const A=h(),a=i??A;return b.useMutation({mutationKey:f?Array.isArray(f)?f:[f]:void 0,mutationFn:async u=>{let s;const p=u??{};switch(e){case"post":s=await a.post(n,p,r);break;case"put":s=await a.put(n,p,r);break;case"patch":s=await a.patch(n,p,r);break;case"delete":s=await a.delete(n,{...r,data:p});break;default:throw new Error(`MÃ©todo HTTP no soportado: ${e}`)}return s.data},...t})}o.provideApi=q,o.useApi=h,o.useGet=j,o.useSend=P,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
