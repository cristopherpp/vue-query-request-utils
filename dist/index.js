(function(u,d){typeof exports=="object"&&typeof module<"u"?d(exports,require("@tanstack/vue-query"),require("vue")):typeof define=="function"&&define.amd?define(["exports","@tanstack/vue-query","vue"],d):(u=typeof globalThis<"u"?globalThis:u||self,d(u.VueQueryRequestUtils={},u.VueQuery,u.Vue))})(this,function(u,d,f){"use strict";const q=Symbol("api");function h(){const t=f.inject(q);if(!t)throw new Error("No API instance provided. You must call provideApi() in your app setup.");return t}function $(t){return{install(e){e.provide(q,t)}}}const c=t=>typeof t=="string"||typeof t=="number"||typeof t=="boolean";class l extends Error{constructor(e){super(`[useGet] ${e}`),this.name="UseGetError"}}const p=t=>{const e=f.toValue(t);if(Array.isArray(e))return e.map(p);if(e&&typeof e=="object"&&!Array.isArray(e)){const n={};for(const r in e)n[r]=p(e[r]);return n}return e},j=(t,e="paramRef")=>{if(t!=null&&!c(t)){if(Array.isArray(t)){t.forEach((n,r)=>{if(!c(n))throw new l(`[${e}[${r}]] must be string | number | boolean, got ${typeof n}`)});return}if(typeof t=="object"){if("path"in t||"query"in t){if(t.path&&(!Array.isArray(t.path)||!t.path.every(c)))throw new l(`[${e}.path] must be an array of string | number | boolean`);if(t.query&&(typeof t.query!="object"||Array.isArray(t.query)))throw new l(`[${e}.query] must be a plain object`);if(t.query){for(const[n,r]of Object.entries(t.query))if(!c(r)&&!(Array.isArray(r)&&r.every(c)))throw new l(`[${e}.query.${n}] must be string | number | boolean or array of those`)}return}for(const[n,r]of Object.entries(t))if(!c(r)&&!(Array.isArray(r)&&r.every(c)))throw new l(`[${e}.${n}] must be string | number | boolean or array of those`);return}throw new l(`[${e}] Unsupported type: ${typeof t}`)}},g=(t,e)=>{let n=[],r={};c(e)?n=[String(e)]:Array.isArray(e)?n=e.map(String):e&&typeof e=="object"&&("path"in e||"query"in e?(Array.isArray(e.path)&&(n=e.path.map(String)),e.query&&typeof e.query=="object"&&!Array.isArray(e.query)&&(r=e.query)):r=e);const a=n.length>0?`${n.join("/")}`:"",y=Object.keys(r).length>0?`?${new URLSearchParams(Object.entries(r).flatMap(([A,s])=>Array.isArray(s)?s.map(b=>[A,String(s)]):[[A,String(s)]])).toString()}`:"";return`${t}${a}${y}`};function S({url:t,queryKey:e,API:n,options:r,paramRef:a}){if(!t||typeof t!="string")throw new Error("Invalid or missing URL");const y=f.isRef(a)?a:f.ref(a),A=f.computed(()=>{const i=f.toValue(e),o=p(y),w=Array.isArray(i)?i.map(p):[p(i)];return o&&(typeof o=="object"&&!Array.isArray(o)&&("path"in o||"query"in o)?w.push(o.path??[],o.query??{}):w.push(o)),w}),s=h(),b=n??s;return d.useQuery({queryKey:A.value,queryFn:async()=>{const i=p(f.unref(y));j(i);const o=i?g(t,i):t;return(await b.get(o)).data},...r})}function v({method:t,url:e,API:n,requestConfig:r,options:a,mutationKey:y}){const A=h(),s=n??A;return d.useMutation({mutationKey:y?Array.isArray(y)?y:[y]:void 0,mutationFn:async b=>{let i;const o=b??{};switch(t){case"post":i=await s.post(e,o,r);break;case"put":i=await s.put(e,o,r);break;case"patch":i=await s.patch(e,o,r);break;case"delete":i=await s.delete(e,{...r,data:o});break;default:throw new Error(`MÃ©todo HTTP no soportado: ${t}`)}return i.data},...a})}u.provideApi=$,u.useApi=h,u.useGet=S,u.useSend=v,Object.defineProperty(u,Symbol.toStringTag,{value:"Module"})});
